'use strict'
Object.defineProperty(exports, '__esModule', {value: true})
exports.Api = void 0
const tslib_1 = require('tslib')
const bud_framework_1 = require('@roots/bud-framework')
const autobind_decorator_1 = require('autobind-decorator')
const api = tslib_1.__importStar(require('./methods'))
class Api extends bud_framework_1.Service {
  constructor() {
    super(...arguments)
    this.name = '@roots/bud-api'
    this.repository = api
  }
  bootstrap(app) {
    Object.assign(
      app,
      this.getEntries().reduce(this.bindMethod, {}),
    )
  }
  bindMethod(acc, [name, fn]) {
    return Object.assign(Object.assign({}, acc), {
      [name]: fn.bind(this.app),
    })
  }
}
tslib_1.__decorate(
  [autobind_decorator_1.boundMethod],
  Api.prototype,
  'bootstrap',
  null,
)
tslib_1.__decorate(
  [autobind_decorator_1.boundMethod],
  Api.prototype,
  'bindMethod',
  null,
)
exports.Api = Api
//# sourceMappingURL=Api.js.map
