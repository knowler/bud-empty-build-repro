'use strict'
Object.defineProperty(exports, '__esModule', {value: true})
exports.proxy = void 0
const lodash_1 = require('lodash')
const proxy = function (config) {
  /**
   * Case: no config passed
   * Response: enable proxy and bounce
   */
  if (lodash_1.isUndefined(config)) {
    this.server.config.set('middleware.proxy', true)
    return this
  }
  /**
   * Case: config.enabled is explicitly set
   * Response: enable proxy, delete property from config
   */
  if (lodash_1.isUndefined(config.enabled)) {
    this.server.config.set('middleware.proxy', true)
  } else {
    this.when(!lodash_1.isBoolean(config.enabled), () => {
      this.dashboard.error(
        'Attempt to set proxy enabled to a non boolean value.',
      )
      process.exit()
    })
    this.server.config.set('middleware.proxy', config.enabled)
  }
  this.server.config.merge(
    'proxy',
    Object.assign(Object.assign({}, config), {
      enabled: undefined,
    }),
  )
  return this
}
exports.proxy = proxy
//# sourceMappingURL=proxy.js.map
