'use strict'
Object.defineProperty(exports, '__esModule', {value: true})
exports.Progress = void 0
const tslib_1 = require('tslib')
const react_1 = tslib_1.__importDefault(require('react'))
const ink_1 = require('ink')
const ink_spinner_1 = tslib_1.__importDefault(
  require('ink-spinner'),
)
const index_1 = require('./Bar/index')
const Progress = ({progress, hasErrors, theme}) => {
  var _a
  const guard =
    (progress === null || progress === void 0
      ? void 0
      : progress.decimal) &&
    theme.bounds.width &&
    typeof theme.bounds.width == 'number'
  if (!guard) return null
  return react_1.default.createElement(
    ink_1.Box,
    {flexDirection: 'row'},
    react_1.default.createElement(
      ink_1.Box,
      {width: 13},
      react_1.default.createElement(
        ink_1.Text,
        {wrap: 'truncate'},
        (progress === null || progress === void 0
          ? void 0
          : progress.decimal) < 1
          ? react_1.default.createElement(
              react_1.default.Fragment,
              null,
              react_1.default.createElement(
                ink_1.Text,
                {color: theme.colors.primary},
                react_1.default.createElement(
                  ink_spinner_1.default,
                  null,
                ),
                ' ',
                (_a = progress.message) !== null && _a !== void 0
                  ? _a
                  : '',
              ),
            )
          : react_1.default.createElement(
              react_1.default.Fragment,
              null,
              hasErrors
                ? react_1.default.createElement(
                    ink_1.Text,
                    {color: theme.colors.error},
                    'X Error',
                  )
                : react_1.default.createElement(
                    ink_1.Text,
                    {color: theme.colors.success},
                    '\u2714 Complete',
                  ),
            ),
      ),
    ),
    react_1.default.createElement(
      ink_1.Box,
      null,
      react_1.default.createElement(index_1.Bar, {
        character: '=',
        maxWidth: theme.bounds.width - 22,
        colors: !hasErrors
          ? [theme.colors.primary, theme.colors.primaryAlt]
          : [theme.colors.error, theme.colors.error],
        percent:
          progress === null || progress === void 0
            ? void 0
            : progress.decimal,
      }),
      react_1.default.createElement(
        ink_1.Text,
        null,
        ' ',
        progress.percentage,
      ),
    ),
  )
}
exports.Progress = Progress
//# sourceMappingURL=index.js.map
