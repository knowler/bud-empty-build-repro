import {Plugin as HtmlWebpackPlugin} from '../html-webpack-plugin'
import {InterpolateHtmlPlugin} from '@roots/bud-support'
const extension = {
  name: 'interpolate-html-plugin',
  options: app => {
    var _a
    const env = Object.fromEntries(
      app.env.getEntries().filter(([k]) => k.includes('APP_')),
    )
    const store =
      (_a = app.store.get(
        'extension.interpolateHtmlPlugin.replace',
      )) !== null && _a !== void 0
        ? _a
        : {}
    return Object.assign(Object.assign({}, env), store)
  },
  make: options =>
    new InterpolateHtmlPlugin(HtmlWebpackPlugin, options.all()),
  when: (_app, options) => options.getEntries().length > 0,
}
export default extension
export const {name, options, make, when} = extension
//# sourceMappingURL=index.js.map
