'use strict'
Object.defineProperty(exports, '__esModule', {value: true})
exports.when = exports.make = exports.options = exports.name = void 0
const html_webpack_plugin_1 = require('../html-webpack-plugin')
const bud_support_1 = require('@roots/bud-support')
const extension = {
  name: 'interpolate-html-plugin',
  options: app => {
    var _a
    const env = Object.fromEntries(
      app.env.getEntries().filter(([k]) => k.includes('APP_')),
    )
    const store =
      (_a = app.store.get(
        'extension.interpolateHtmlPlugin.replace',
      )) !== null && _a !== void 0
        ? _a
        : {}
    return Object.assign(Object.assign({}, env), store)
  },
  make: options =>
    new bud_support_1.InterpolateHtmlPlugin(
      html_webpack_plugin_1.Plugin,
      options.all(),
    ),
  when: (_app, options) => options.getEntries().length > 0,
}
exports.default = extension
;(exports.name = extension.name),
  (exports.options = extension.options),
  (exports.make = extension.make),
  (exports.when = extension.when)
//# sourceMappingURL=index.js.map
