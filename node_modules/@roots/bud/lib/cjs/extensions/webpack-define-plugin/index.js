'use strict'
Object.defineProperty(exports, '__esModule', {value: true})
exports.options = exports.when = exports.make = exports.name = void 0
const webpack_1 = require('webpack')
const extension = {
  name: 'webpack-define-plugin',
  make: options => new webpack_1.DefinePlugin(options.all()),
  when: (_bud, opts) => {
    var _a
    return (
      ((_a = opts.getEntries()) === null || _a === void 0
        ? void 0
        : _a.length) > 0
    )
  },
  options: ({env, store}) => {
    /**
     * .env values which contain PUBLIC
     */
    const fromEnv = env
      .getEntries()
      .filter(([k]) => k.includes('APP_PUBLIC'))
      .reduce(
        (a, [k, v]) =>
          Object.assign(Object.assign({}, a), {
            [k]: JSON.stringify(v),
          }),
        {},
      )
    const fromStore = store.get('extension.webpackDefinePlugin')
    return Object.assign(Object.assign({}, fromEnv), fromStore)
  },
}
exports.default = extension
;(exports.name = extension.name),
  (exports.make = extension.make),
  (exports.when = extension.when),
  (exports.options = extension.options)
//# sourceMappingURL=index.js.map
