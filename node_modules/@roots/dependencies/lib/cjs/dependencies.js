'use strict'
Object.defineProperty(exports, '__esModule', {value: true})
exports.Dependencies = void 0
const child_process_1 = require('child_process')
const yarn_1 = require('./yarn')
const npm_1 = require('./npm')
class Dependencies {
  constructor(path = process.cwd()) {
    this.path = path
  }
  get client() {
    if (this.isYarn()) {
      return new yarn_1.Yarn(this.path)
    }
    return new npm_1.Npm(this.path)
  }
  isYarn() {
    try {
      // user could have yarn installed, but not be using it
      // this will return false if the user isn't actually using yarn
      if (
        !process.env.npm_execpath ||
        process.env.npm_execpath.indexOf('yarn') === -1
      ) {
        return false
      }
      // test to be sure yarn can be spawned
      child_process_1.spawnSync('command -v yarn >/dev/null')
      return true
    } catch (e) {}
    return false
  }
}
exports.Dependencies = Dependencies
//# sourceMappingURL=dependencies.js.map
