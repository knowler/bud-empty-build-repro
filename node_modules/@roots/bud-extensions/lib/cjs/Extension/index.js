'use strict'
Object.defineProperty(exports, '__esModule', {value: true})
exports.Extension = void 0
const tslib_1 = require('tslib')
const lodash_1 = tslib_1.__importDefault(require('lodash'))
const bud_framework_1 = require('@roots/bud-framework')
const autobind_decorator_1 = require('autobind-decorator')
class Extension extends bud_framework_1.Extension {
  register() {
    this.app.when(this.module.options, () =>
      this.set('options', () => this.module.options),
    )
    this.app.when(this.module.hasOwnProperty('api'), () => {
      Object.assign(
        this.app,
        lodash_1.default.isFunction(this.module.api)
          ? this.module.api(this.app)
          : this.module.api,
      )
    })
    this.app.when(this.module.register, () => {
      this.module.register(this.app)
    })
    this.set('when', () => this.module.when)
    this.set('make', () => this.module.make)
    this.logger.scope(this.name).success('Extension registered')
    return this
  }
  boot() {
    this.app.when(this.module.boot, () => {
      this.module.boot(this.app)
    })
    this.logger.scope(this.name).success('Extension booted')
    return this
  }
}
tslib_1.__decorate(
  [autobind_decorator_1.boundMethod],
  Extension.prototype,
  'register',
  null,
)
tslib_1.__decorate(
  [autobind_decorator_1.boundMethod],
  Extension.prototype,
  'boot',
  null,
)
exports.Extension = Extension
//# sourceMappingURL=index.js.map
